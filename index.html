<!DOCTYPE html>
<html>
<head>
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <h2>Android Chrome Notifications</h2>
    <button onclick="subscribeUser()">Enable Notifications</button>

    <script>
        // 1. Register the Service Worker
        async function registerSW() {
            const registration = await navigator.serviceWorker.register('sw.js');
            return registration;
        }

        // 2. Request Permission and Subscribe
        async function subscribeUser() {
            const permission = await Notification.requestPermission();
            if (permission === 'granted') {
                const registration = await registerSW();
                // In a real app, you'd send this 'subscription' object to your server
                console.log('User is subscribed:', registration);
                alert('Notifications Enabled!');
            }
        }
    </script>
</body>
</html>
